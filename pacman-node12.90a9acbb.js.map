{"version":3,"sources":["setup.js","node_modules/@babel/runtime/helpers/arrayLikeToArray.js","node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","node_modules/@babel/runtime/helpers/iterableToArray.js","node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","node_modules/@babel/runtime/helpers/nonIterableSpread.js","node_modules/@babel/runtime/helpers/toConsumableArray.js","node_modules/@babel/runtime/helpers/classCallCheck.js","node_modules/@babel/runtime/helpers/createClass.js","GameBoard.js","node_modules/@babel/runtime/helpers/defineProperty.js","Pacman.js","ghostMoves.js","Ghost.js","index.js"],"names":["GRID_SIZE","CELL_SIZE","DIRECTIONS","ArrowLeft","code","movement","rotation","ArrowUp","ArrowRight","ArrowDown","OBJECT_TYPE","BLANK","WALL","DOT","BLINKY","PINKY","INKY","CLYDE","PILL","PACMAN","GHOST","SCARED","GHOSTLAIR","CLASS_LIST","LEVEL","_arrayLikeToArray","arr","len","length","i","arr2","Array","module","exports","__esModule","arrayLikeToArray","require","_arrayWithoutHoles","isArray","_iterableToArray","iter","Symbol","iterator","from","_unsupportedIterableToArray","o","minLen","n","Object","prototype","toString","call","slice","constructor","name","test","_nonIterableSpread","TypeError","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","_toConsumableArray","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","GameBoard","DOMGrid","dotCount","grid","gameWin","div","document","createElement","classList","add","innerHTML","appendChild","level","style","cssText","forEach","square","push","pos","classes","remove","object","contains","deg","transform","character","shouldMove","getNextMove","objectExist","bind","nextMovePos","direction","makeMove","classesToRemove","classesToAdd","rotateDiv","dir","removeObject","addObject","setNewPos","board","createGrid","_defineProperty","obj","value","Pacman","speed","startPos","e","keyCode","timer","powerPill","randomMovement","position","keys","Math","floor","random","Ghost","isScared","gameGrid","querySelector","scoreTable","startButton","POWER_PILL_TIME","GLOBAL_SPEED","gameBoard","createGameBoard","score","powerPillActive","powerPillTimer","playAudio","audio","Audio","play","gameOver","pacman","soundGameOver","removeEventListener","handleKeyInput","showGameStatus","clearInterval","checkCollision","ghosts","collidedGhost","find","ghost","soundGhost","gameLoop","moveCharacter","soundDot","soundPill","clearTimeout","setTimeout","startGame","soundGameStart","addEventListener","setInterval"],"mappings":";AA+EE,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,YAAA,QAAA,MAAA,QAAA,UAAA,QAAA,WAAA,QAAA,WAAA,QAAA,eAAA,EA/EK,IAAMA,EAAY,GAAG,QAAA,UAAA,EACrB,IAAMC,EAAY,GAAG,QAAA,UAAA,EACrB,IAAMC,EAAa,CACxBC,UAAW,CACTC,KAAM,GACNC,UAAW,EACXC,SAAU,KAEZC,QAAS,CACPH,KAAM,GACNC,UAAWL,EACXM,SAAU,KAEZE,WAAY,CACVJ,KAAM,GACNC,SAAU,EACVC,SAAU,GAEZG,UAAW,CACTL,KAAM,GACNC,SAAUL,EACVM,SAAU,KAEZ,QAAA,WAAA,EAEK,IAAMI,EAAc,CACzBC,MAAO,QACPC,KAAM,OACNC,IAAK,MACLC,OAAQ,SACRC,MAAO,QACPC,KAAM,OACNC,MAAO,QACPC,KAAM,OACNC,OAAQ,SACRC,MAAO,QACPC,OAAQ,SACRC,UAAW,QAGb,QAAA,YAAA,EACO,IAAMC,EAAa,CACxBb,EAAYC,MACZD,EAAYE,KACZF,EAAYG,IACZH,EAAYI,OACZJ,EAAYK,MACZL,EAAYM,KACZN,EAAYO,MACZP,EAAYQ,KACZR,EAAYS,OACZT,EAAYY,WAGd,QAAA,WAAA,EACO,IAAME,EAAQ,CACnB,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACzD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACzD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACzD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACzD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACzD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACzD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACzD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACzD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACzD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACzD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACzD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACzD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACzD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACzD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACzD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACzD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG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","file":"pacman-node12.90a9acbb.js","sourceRoot":"..","sourcesContent":["export const GRID_SIZE = 20;\r\nexport const CELL_SIZE = 20;\r\nexport const DIRECTIONS = {\r\n  ArrowLeft: {\r\n    code: 37,\r\n    movement: -1,\r\n    rotation: 180\r\n  },\r\n  ArrowUp: {\r\n    code: 38,\r\n    movement: -GRID_SIZE,\r\n    rotation: 270\r\n  },\r\n  ArrowRight: {\r\n    code: 39,\r\n    movement: 1,\r\n    rotation: 0\r\n  },\r\n  ArrowDown: {\r\n    code: 40,\r\n    movement: GRID_SIZE,\r\n    rotation: 90\r\n  }\r\n};\r\n\r\nexport const OBJECT_TYPE = {\r\n  BLANK: 'blank',\r\n  WALL: 'wall',\r\n  DOT: 'dot',\r\n  BLINKY: 'blinky',\r\n  PINKY: 'pinky',\r\n  INKY: 'inky',\r\n  CLYDE: 'clyde',\r\n  PILL: 'pill',\r\n  PACMAN: 'pacman',\r\n  GHOST: 'ghost',\r\n  SCARED: 'scared',\r\n  GHOSTLAIR: 'lair'\r\n};\r\n\r\n// Lookup array for classes\r\nexport const CLASS_LIST = [\r\n  OBJECT_TYPE.BLANK,\r\n  OBJECT_TYPE.WALL,\r\n  OBJECT_TYPE.DOT,\r\n  OBJECT_TYPE.BLINKY,\r\n  OBJECT_TYPE.PINKY,\r\n  OBJECT_TYPE.INKY,\r\n  OBJECT_TYPE.CLYDE,\r\n  OBJECT_TYPE.PILL,\r\n  OBJECT_TYPE.PACMAN,\r\n  OBJECT_TYPE.GHOSTLAIR\r\n];\r\n\r\n// prettier-ignore\r\nexport const LEVEL = [\r\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,\r\n  1, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 1,\r\n  1, 2, 1, 1, 2, 1, 1, 1, 2, 1, 1, 2, 1, 1, 1, 2, 1, 1, 2, 1,\r\n  1, 7, 1, 1, 2, 1, 1, 1, 2, 1, 1, 2, 1, 1, 1, 2, 1, 1, 7, 1,\r\n  1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1,\r\n  1, 2, 1, 1, 2, 1, 2, 1, 1, 1, 1, 1, 1, 2, 1, 2, 1, 1, 2, 1,\r\n  1, 2, 2, 2, 2, 1, 2, 2, 2, 1, 1, 2, 2, 2, 1, 2, 2, 2, 2, 1,\r\n  1, 1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 1,\r\n  0, 0, 0, 1, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 1, 0, 0, 0,\r\n  0, 0, 0, 1, 2, 1, 2, 1, 9, 9, 9, 9, 1, 2, 1, 2, 1, 0, 0, 0,\r\n  1, 1, 1, 1, 2, 1, 2, 1, 9, 9, 9, 9, 1, 2, 1, 2, 1, 1, 1, 1, \r\n  1, 0, 0, 0, 2, 2, 2, 1, 9, 9, 9, 9, 1, 2, 2, 2, 0, 0, 0, 1, \r\n  1, 1, 1, 1, 2, 1, 2, 1, 9, 9, 9, 9, 1, 2, 1, 2, 1, 1, 1, 1, \r\n  0, 0, 0, 1, 2, 1, 2, 1, 1, 1, 1, 1, 1, 2, 1, 2, 1, 0, 0, 0,\r\n  0, 0, 0, 1, 2, 1, 2, 0, 0, 0, 0, 0, 0, 2, 1, 2, 1, 0, 0, 0,\r\n  1, 1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 1,\r\n  1, 2, 2, 2, 2, 1, 2, 2, 2, 1, 1, 2, 2, 2, 1, 2, 2, 2, 2, 1,\r\n  1, 2, 1, 1, 2, 1, 2, 1, 1, 1, 1, 1, 1, 2, 1, 2, 1, 1, 2, 1,\r\n  1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1,\r\n  1, 7, 1, 1, 2, 1, 1, 1, 2, 1, 1, 2, 1, 1, 1, 2, 1, 1, 7, 1,\r\n  1, 2, 1, 1, 2, 1, 1, 1, 2, 1, 1, 2, 1, 1, 1, 2, 1, 1, 2, 1,\r\n  1, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 1,\r\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,\r\n];\r\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\nvar iterableToArray = require(\"./iterableToArray.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import { GRID_SIZE, CELL_SIZE, OBJECT_TYPE, CLASS_LIST } from './setup';\r\n\r\nclass GameBoard {\r\n    constructor(DOMGrid) {\r\n        this.dotCount = 0;\r\n        this.grid = [];\r\n        this.DOMGrid = DOMGrid;\r\n    }\r\n\r\n    showGameStatus(gameWin) {\r\n        const div = document.createElement('div');\r\n        div.classList.add('game-status');\r\n        div.innerHTML = `${gameWin ? 'WIN !' : 'GAME OVER !'}`;\r\n        this.DOMGrid.appendChild(div);\r\n    }\r\n\r\n    createGrid(level) {\r\n        this.dotCount = 0;\r\n        this.grid = [];\r\n        this.DOMGrid.innerHTML = '';\r\n        this.DOMGrid.style.cssText = `grid-template-columns: repeat(${GRID_SIZE}, ${CELL_SIZE}px)`;\r\n\r\n        level.forEach((square) => {\r\n            const div = document.createElement('div');\r\n            div.classList.add('square', CLASS_LIST[square]);\r\n            div.style.cssText = `width: ${CELL_SIZE}px; height: ${CELL_SIZE}px;`;\r\n            this.DOMGrid.appendChild(div);\r\n            this.grid.push(div);\r\n\r\n            if (CLASS_LIST[square] === OBJECT_TYPE.DOT) {\r\n                this.dotCount++;\r\n            }\r\n        })\r\n    }\r\n\r\n    addObject(pos, classes) {\r\n        this.grid[pos].classList.add(...classes);\r\n    }\r\n\r\n    removeObject(pos, classes) {\r\n        this.grid[pos].classList.remove(...classes);\r\n    }\r\n\r\n    objectExist(pos, object) {\r\n        return this.grid[pos].classList.contains(object);\r\n    }\r\n\r\n    rotateDiv(pos, deg) {\r\n        this.grid[pos].style.transform = `rotate(${deg}deg)`;\r\n    }\r\n\r\n    moveCharacter(character) {\r\n        if (character.shouldMove()) {\r\n            const { nextMovePos, direction } = character.getNextMove(\r\n                this.objectExist.bind(this)\r\n            );\r\n            const { classesToRemove, classesToAdd } = character.makeMove();\r\n\r\n            if (character.rotation && nextMovePos !== character.pos) {\r\n                // Rotate\r\n                this.rotateDiv(nextMovePos, character.dir.rotation);\r\n                // Rotate the previous div back\r\n                this.rotateDiv(character.pos, 0);\r\n            }\r\n\r\n            this.removeObject(character.pos, classesToRemove);\r\n            this.addObject(nextMovePos, classesToAdd);\r\n\r\n            character.setNewPos(nextMovePos, direction);\r\n        }\r\n    }\r\n\r\n    static createGameBoard(DOMGrid, level) {\r\n        const board = new this(DOMGrid);\r\n        board.createGrid(level);\r\n        return board;\r\n    }\r\n}\r\n\r\nexport default GameBoard;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import { OBJECT_TYPE, DIRECTIONS } from './setup';\r\n\r\nclass Pacman {\r\n    constructor(speed, startPos) {\r\n        this.pos = startPos;\r\n        this.speed = speed;\r\n        this.dir = null;\r\n        this.timer = 0;\r\n        this.powerPill = false;\r\n        this.rotation = true;\r\n    }\r\n\r\n    shouldMove() {\r\n        // Don't move before a key is pressed\r\n        if (!this.dir) return;\r\n\r\n        if (this.timer === this.speed) {\r\n            this.timer = 0;\r\n            return true;\r\n        }\r\n        this.timer++;\r\n    }\r\n\r\n    getNextMove(objectExist) {\r\n        let nextMovePos = this.pos + this.dir.movement;\r\n        // Do we collide with a wall?\r\n        if (\r\n            objectExist(nextMovePos, OBJECT_TYPE.WALL) ||\r\n            objectExist(nextMovePos, OBJECT_TYPE.GHOSTLAIR)\r\n        ) {\r\n            nextMovePos = this.pos;\r\n        }\r\n\r\n        return {\r\n            nextMovePos,\r\n            direction: this.dir\r\n        };\r\n    }\r\n\r\n    makeMove() {\r\n        const classesToRemove = [OBJECT_TYPE.PACMAN];\r\n        const classesToAdd = [OBJECT_TYPE.PACMAN];\r\n\r\n        return {\r\n            classesToRemove,\r\n            classesToAdd\r\n        };\r\n    }\r\n\r\n    setNewPos(nextMovePos) {\r\n        this.pos = nextMovePos;\r\n    }\r\n\r\n    handleKeyInput = (e, objectExist) => {\r\n        let dir;\r\n\r\n        if (e.keyCode >= 37 && e.keyCode <= 40) {\r\n            dir = DIRECTIONS[e.key];\r\n        } else {\r\n            return;\r\n        }\r\n\r\n        const nextMovePos = this.pos + dir.movement;\r\n        if (objectExist(nextMovePos, OBJECT_TYPE.WALL)) return;\r\n        this.dir = dir;\r\n    }\r\n}\r\n\r\nexport default Pacman;","import { DIRECTIONS, OBJECT_TYPE } from './setup';\r\n\r\n// Primitive random movement.\r\nexport function randomMovement(position, direction, objectExist) {\r\n    let dir = direction;\r\n    let nextMovePos = position + dir.movement;\r\n    // Create an array from the diretions objects keys\r\n    const keys = Object.keys(DIRECTIONS);\r\n\r\n    while (\r\n        objectExist(nextMovePos, OBJECT_TYPE.WALL) ||\r\n        objectExist(nextMovePos, OBJECT_TYPE.GHOST)\r\n    ) {\r\n        // Get a random key from the key array\r\n        const key = keys[Math.floor(Math.random() * keys.length)];\r\n        // Set the next direction\r\n        dir = DIRECTIONS[key];\r\n        // Set the next move\r\n        nextMovePos = position + dir.movement;\r\n    }\r\n\r\n    return { nextMovePos, direction: dir };\r\n}","import { DIRECTIONS, OBJECT_TYPE } from './setup';\r\nimport { randomMovement } from './ghostMoves';\r\n\r\nclass Ghost {\r\n    constructor(speed = 5, startPos, movement, name) {\r\n        this.name = name;\r\n        this.movement = movement;\r\n        this.startPos = startPos;\r\n        this.pos = startPos;\r\n        this.dir = DIRECTIONS.ArrowRight;\r\n        this.speed = speed;\r\n        this.timer = 0;\r\n        this.isScared = false;\r\n        this.rotation = false;\r\n    }\r\n\r\n    shouldMove() {\r\n        if (this.timer === this.speed) {\r\n            this.timer = 0;\r\n            return true;\r\n        }\r\n        this.timer++;\r\n        return false;\r\n    }\r\n\r\n    getNextMove(objectExist) {\r\n        const { nextMovePos, direction } = this.movement(\r\n            this.pos,\r\n            this.dir,\r\n            objectExist\r\n        );\r\n        return { nextMovePos, direction };\r\n    }\r\n\r\n    makeMove() {\r\n        const classesToRemove = [OBJECT_TYPE.GHOST, OBJECT_TYPE.SCARED, this.name];\r\n        let classesToAdd = [OBJECT_TYPE.GHOST, this.name];\r\n\r\n        if (this.isScared) classesToAdd = [...classesToAdd, OBJECT_TYPE.SCARED];\r\n\r\n        return { classesToRemove, classesToAdd };\r\n    }\r\n\r\n    setNewPos(nextMovePos, direction) {\r\n        this.pos = nextMovePos;\r\n        this.dir = direction;\r\n    }\r\n}\r\n\r\nexport default Ghost;","import { LEVEL, OBJECT_TYPE } from './setup.js';\r\nimport GameBoard from './GameBoard.js';\r\nimport Pacman from './Pacman.js';\r\nimport Ghost from './Ghost.js';\r\nimport { randomMovement } from './ghostMoves.js';\r\nimport soundDot from './sounds/munch.wav';\r\nimport soundPill from './sounds/pill.wav';\r\nimport soundGameStart from './sounds/game_start.wav';\r\nimport soundGameOver from './sounds/death.wav';\r\nimport soundGhost from './sounds/eat_ghost.wav';\r\n\r\nconst gameGrid = document.querySelector('#game');\r\nconst scoreTable = document.querySelector('#score');\r\nconst startButton = document.querySelector('#start-button');\r\n\r\nconst POWER_PILL_TIME = 10000;\r\nconst GLOBAL_SPEED = 80;\r\nconst gameBoard = GameBoard.createGameBoard(gameGrid, LEVEL);\r\n\r\nlet score = 0;\r\nlet timer = null;\r\nlet gameWin = false;\r\nlet powerPillActive = false;\r\nlet powerPillTimer = null;\r\n\r\n// Audio\r\nfunction playAudio(audio) {\r\n    const soundEffect = new Audio(audio);\r\n    soundEffect.play();\r\n}\r\n\r\nfunction gameOver(pacman, grid) {\r\n    playAudio(soundGameOver);\r\n\r\n    document.removeEventListener('keydown', e =>\r\n        pacman.handleKeyInput(e, gameBoard.objectExist)\r\n    );\r\n\r\n    gameBoard.showGameStatus(gameWin);\r\n\r\n    clearInterval(timer);\r\n\r\n    startButton.classList.remove('hide');\r\n}\r\n\r\nfunction checkCollision(pacman, ghosts) {\r\n    const collidedGhost = ghosts.find( ghost => pacman.pos === ghost.pos);\r\n\r\n    if (collidedGhost) {\r\n        if (pacman.powerPill) {\r\n            playAudio(soundGhost);\r\n\r\n            gameBoard.removeObject(collidedGhost.pos, [\r\n                OBJECT_TYPE.GHOST,\r\n                OBJECT_TYPE.SCARED,\r\n                collidedGhost.name\r\n            ]);\r\n            collidedGhost.pos = collidedGhost.startPos;\r\n            score += 100;\r\n        } else {\r\n            gameBoard.removeObject(pacman.pos, [OBJECT_TYPE.PACMAN]);\r\n            gameBoard.rotateDiv(pacman.pos, 0);\r\n            gameOver(pacman, gameGrid);\r\n        }\r\n    }\r\n}\r\n\r\nfunction gameLoop(pacman, ghosts) {\r\n    gameBoard.moveCharacter(pacman);\r\n    checkCollision(pacman, ghosts);\r\n    \r\n    ghosts.forEach(ghost => gameBoard.moveCharacter(ghost));\r\n    checkCollision(pacman, ghosts);\r\n\r\n    // Check if Pacman eats a dot\r\n    if (gameBoard.objectExist(pacman.pos, OBJECT_TYPE.DOT)) {\r\n        playAudio(soundDot);\r\n\r\n        gameBoard.removeObject(pacman.pos, [OBJECT_TYPE.DOT]);\r\n        gameBoard.dotCount--;\r\n        score += 10;\r\n    }\r\n\r\n    // Check if Pacman eats a powerpill\r\n    if (gameBoard.objectExist(pacman.pos, OBJECT_TYPE.PILL)) {\r\n        playAudio(soundPill);\r\n\r\n        gameBoard.removeObject(pacman.pos, [OBJECT_TYPE.PILL]);\r\n    \r\n        pacman.powerPill = true;\r\n        score += 50;\r\n\r\n        clearTimeout(powerPillTimer);\r\n        powerPillTimer = setTimeout(\r\n            () => (pacman.powerPill = false),\r\n            POWER_PILL_TIME\r\n        );\r\n    }\r\n\r\n    // Change ghost score mode depending on Powerpill\r\n    if (pacman.powerPill !== powerPillActive) {\r\n        powerPillActive = pacman.powerPill;\r\n        ghosts.forEach( (ghost) => (ghost.isScared = pacman.powerPill));\r\n    }\r\n\r\n    // Check if all dots have been eaten\r\n    if (gameBoard.dotCount === 0) {\r\n        gameWin = true;\r\n        gameOver(pacman, ghosts);\r\n    }\r\n\r\n    // Show the score\r\n    scoreTable.innerHTML = score;\r\n}\r\n\r\nfunction startGame() {\r\n    playAudio(soundGameStart);\r\n\r\n    gameWin = false;\r\n    powerPillActive = false;\r\n    score = 0;\r\n\r\n    startButton.classList.add('hide');\r\n\r\n    gameBoard.createGrid(LEVEL);\r\n\r\n    const pacman = new Pacman(2, 287);\r\n    gameBoard.addObject(287, [OBJECT_TYPE.PACMAN]);\r\n    document.addEventListener('keydown', (e) =>\r\n        pacman.handleKeyInput(e, gameBoard.objectExist.bind(gameBoard))\r\n    );\r\n\r\n    const ghosts = [\r\n        new Ghost(5, 188, randomMovement, OBJECT_TYPE.BLINKY),\r\n        new Ghost(4, 209, randomMovement, OBJECT_TYPE.PINKY),\r\n        new Ghost(3, 230, randomMovement, OBJECT_TYPE.INKY),\r\n        new Ghost(2, 251, randomMovement, OBJECT_TYPE.CLYDE)\r\n    ];\r\n\r\n    // Gameloop\r\n    timer = setInterval(() => gameLoop(pacman, ghosts), GLOBAL_SPEED);\r\n}\r\n\r\n// Initialize game\r\nstartButton.addEventListener('click', startGame);\r\n"]}